> 记录开发学习过程中，对某些点的理解深化



#### fragment

+ add 和 replace

  一开始以为使用了replace 后，点击返回就回不到前一个fragment，因为replace 相当于同时执行了remove和add操作，既然已经remove，就无法返回了。后来，在连续 add 后，发现fragment出现了重叠，这才重新对自己的认知进行了审视。其实，我是错误的理解了remove，**remove 并不是删除，而只是从当前界面中移出**，能否返回是跟addToBackStack 相关。在commit 前进行 addToBackStack ，应该将前面的所有replace、add、remove操作步骤作为一个整体，因为在返回时，也是根据的这一系列操作进行恢复，而不是单个操作。比如，进行三次commit

  1. add A -> replace B -> addToBackStack  -> commit
  2. add C -> commit
  3. replace D -> addToBackStack  -> commit

  然后，第一次返回，会将 D 退出，然后界面处于1、2 重叠，再次返回只留下 2 的界面，即每一次的 back 都是撤销当前 addToBackStack 的 commit。不过还是没有完全理解，为什么3没有将 2 移出，看来还需要更进一步剖析源码。